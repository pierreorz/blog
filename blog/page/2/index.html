
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>邓德昭的技术博客</title>
  <meta name="author" content="pierreorz">

  
  <meta name="description" content="平台:Jdeveloper 12c
需求：对Collection类型遍历。MB中定义两个List，如何利用iterator&amp;foreach控件将List内容显示到页面。 页面如下 分别绑定iterBean中的两个集合类型变量，将其中的值取出来。 1
2
3
4
5
6
7
8
9
10 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dengdezhao.cn/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="邓德昭的技术博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="/stylesheets/google-fonts.css" rel="stylesheet" type="text/css">
<link href="/stylesheets/default.css" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><img src="../../../../../wp-content/uploads/logo.gif" width=40px height=40px  alt="" /><a href="/">邓德昭的技术博客</a></h1>
  
    <h2>最大的懦弱，不是畏葸不前，而是安于现状</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dengdezhao.cn" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">博客主页</a></li>
  <li><a href="/blog/archives">文章列表</a></li>
  <li><a href="/tag">标签云</a></li>
  <li><a href="/about">关于</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-09-23/kong-jian-af-iteratoryi-ji-af-foreachde-dui-bi/">控件af:iterator以及af:forEach的对比</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-23T18:13:00+08:00" pubdate data-updated="true">Sep 23<span>rd</span>, 2013</time>
        
         | <a href="/blog/2013-09-23/kong-jian-af-iteratoryi-ji-af-foreachde-dui-bi/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li><p>平台:Jdeveloper 12c</p></li>
<li><p>需求：对Collection类型遍历。MB中定义两个List，如何利用iterator&amp;foreach控件将List内容显示到页面。</p></li>
</ul>


<p><strong>页面如下</strong></p>

<p>分别绑定iterBean中的两个集合类型变量，将其中的值取出来。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&lt;</span><span class="nl">af:</span><span class="n">iterator</span> <span class="n">id</span><span class="o">=</span><span class="s">&quot;i1&quot;</span> <span class="n">var</span><span class="o">=</span><span class="s">&quot;each&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;#{iterBean.list}&quot;</span> <span class="n">varStatus</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nl">af:</span><span class="n">panelBox</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;#{each}&quot;</span> <span class="n">id</span><span class="o">=</span><span class="s">&quot;pb1&quot;</span><span class="o">&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nl">f:</span><span class="n">facet</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;toolbar&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>        <span class="o">&lt;</span><span class="nl">af:</span><span class="n">inputText</span> <span class="n">label</span><span class="o">=</span><span class="s">&quot;Values&quot;</span> <span class="n">id</span><span class="o">=</span><span class="s">&quot;it1&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;#{iterBean.values[row.index]}&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>    <span class="o">&lt;/</span><span class="nl">af:</span><span class="n">panelBox</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nl">af:</span><span class="n">iterator</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nl">af:</span><span class="n">forEach</span> <span class="n">items</span><span class="o">=</span><span class="s">&quot;#{iterBean.testList}&quot;</span>  <span class="n">var</span><span class="o">=</span><span class="s">&quot;each&quot;</span> <span class="n">varStatus</span><span class="o">=</span><span class="s">&quot;row&quot;</span><span class="o">&gt;</span>
</span><span class='line'>  <span class="o">&lt;</span><span class="nl">af:</span><span class="n">panelBox</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;#{each.title}&quot;</span> <span class="n">id</span><span class="o">=</span><span class="s">&quot;pb2&quot;</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="o">&lt;</span><span class="nl">af:</span><span class="n">outputText</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;#{row.index} #{each.title}&quot;</span> <span class="n">id</span><span class="o">=</span><span class="s">&quot;ot1&quot;</span><span class="o">/&gt;</span>
</span><span class='line'>    <span class="o">&lt;/</span><span class="nl">af:</span><span class="n">panelBox</span><span class="o">&gt;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="nl">af:</span><span class="n">forEach</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>BackingBean内容如下：</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">cn</span><span class="o">.</span><span class="na">dengdezhao</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">IteratorBean</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">List</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">();</span>
</span><span class='line'>    <span class="n">String</span><span class="o">[]</span> <span class="n">values</span><span class="o">=</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">&quot;1&quot;</span><span class="o">,</span><span class="s">&quot;2&quot;</span><span class="o">,</span><span class="s">&quot;3&quot;</span><span class="o">};</span>
</span><span class='line'>    <span class="n">List</span><span class="o">&lt;</span><span class="n">contentList</span><span class="o">&gt;</span> <span class="n">testList</span><span class="o">=</span><span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">contentList</span><span class="o">&gt;();</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTestList</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">contentList</span><span class="o">&gt;</span> <span class="n">testList</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;setTestList...&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">testList</span> <span class="o">=</span> <span class="n">testList</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">contentList</span><span class="o">&gt;</span> <span class="nf">getTestList</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;getTestList...&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">testList</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setValues</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">values</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">values</span> <span class="o">=</span> <span class="n">values</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">getValues</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">values</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">IteratorBean</span><span class="o">(){</span>
</span><span class='line'>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;A&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;B&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;C&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">contentList</span> <span class="n">a</span><span class="o">=</span><span class="k">new</span> <span class="n">contentList</span><span class="o">();</span>
</span><span class='line'>        <span class="n">a</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;aaa&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">testList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">a</span><span class="o">);</span>
</span><span class='line'>        <span class="n">contentList</span> <span class="n">b</span><span class="o">=</span><span class="k">new</span> <span class="n">contentList</span><span class="o">();</span>
</span><span class='line'>        <span class="n">b</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;bbb&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">testList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>
</span><span class='line'>        <span class="n">contentList</span> <span class="n">c</span><span class="o">=</span><span class="k">new</span> <span class="n">contentList</span><span class="o">();</span>
</span><span class='line'>        <span class="n">c</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;ccc&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">testList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">c</span><span class="o">);</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;init...&quot;</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setList</span><span class="o">(</span><span class="n">List</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;setList ...&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">list</span> <span class="o">=</span> <span class="n">list</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">List</span> <span class="nf">getList</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;getList...&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">contentList</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTitle</span><span class="o">(</span><span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">title</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>测试结果</strong></p>

<p>&lt;af:iterator>只调用了一次get方法；
&lt;af:forEach>却调用了9次get方法（根据容器中数量递增）；</p>

<p><strong>结论</strong></p>

<p>&lt;af:iterator>跟&lt;af:forEach>控件都可以对容器类型遍历，只不过iterator是一次性取出容器内容，而forEach是多次取出。两控件都支持下标定位。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-09-04/ru-he-huo-qu-web-dot-xmlzhong-de-context-paramcan-shu/">如何获取web.xml中的context-param参数</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-04T19:30:00+08:00" pubdate data-updated="true">Sep 4<span>th</span>, 2013</time>
        
         | <a href="/blog/2013-09-04/ru-he-huo-qu-web-dot-xmlzhong-de-context-paramcan-shu/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>通过EL表达试获取</strong></p>

<p>以web.xml中的<context-param>参数：javax.faces.FACELETS_VIEW_MAPPINGS为例,
可通过以下EL获取。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>
</span><span class='line'><span class="n">$</span><span class="o">{</span><span class="n">initParam</span><span class="o">[</span><span class="err">&#39;</span><span class="n">javax</span><span class="o">.</span><span class="na">faces</span><span class="o">.</span><span class="na">FACELETS_VIEW_MAPPINGS</span><span class="err">&#39;</span><span class="o">]}</span>
</span></code></pre></td></tr></table></div></figure>


<p>如果参数名称很简单，比如：testParameter，EL表达式也可以写成以下方式：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>
</span><span class='line'><span class="n">$</span><span class="o">{</span><span class="n">initParam</span><span class="o">.</span><span class="na">testParameter</span><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>通过JAVA代码获取</strong></p>

<p>如果需要在MB方法中获取该参数值，可以参照以下代码：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">action</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">FacesContext</span> <span class="n">fctx</span><span class="o">=</span><span class="n">FacesContext</span><span class="o">.</span><span class="na">getCurrentInstance</span><span class="o">();</span>
</span><span class='line'>        <span class="n">ExternalContext</span> <span class="n">ec</span><span class="o">=</span><span class="n">fctx</span><span class="o">.</span><span class="na">getExternalContext</span><span class="o">();</span>
</span><span class='line'>        <span class="n">ServletContext</span> <span class="n">servletContext</span><span class="o">=(</span><span class="n">ServletContext</span><span class="o">)</span><span class="n">ec</span><span class="o">.</span><span class="na">getContext</span><span class="o">();</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">value</span><span class="o">=</span><span class="n">servletContext</span><span class="o">.</span><span class="na">getInitParameter</span><span class="o">(</span><span class="s">&quot;javax.faces.FACELETS_VIEW_MAPPINGS&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
</span><span class='line'>        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-06-25/centosxia-an-zhuang-mysql5-dot-6hou-wang-ji-rootmi-ma-%2Czhong-zhi-mi-ma/">Centos下安装mysql5.6后忘记ROOT密码，重置密码</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-25T16:01:00+08:00" pubdate data-updated="true">Jun 25<span>th</span>, 2013</time>
        
         | <a href="/blog/2013-06-25/centosxia-an-zhuang-mysql5-dot-6hou-wang-ji-rootmi-ma-%2Czhong-zhi-mi-ma/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>安装</strong></p>

<p>去<a href="https://edelivery.oracle.com/EPD/Search/handle_go">oracle官网</a>下载mysql5.6 for linux安装介质V38444-01.zip。  <br/>
解压缩之后</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">MySQL</span><span class="o">-</span><span class="n">client</span><span class="o">-</span><span class="n">advanced</span><span class="o">-</span><span class="mf">5.6</span><span class="o">.</span><span class="mi">12</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="na">el6</span><span class="o">.</span><span class="na">i686</span><span class="o">.</span><span class="na">rpm</span>
</span><span class='line'><span class="n">MySQL</span><span class="o">-</span><span class="n">devel</span><span class="o">-</span><span class="n">advanced</span><span class="o">-</span><span class="mf">5.6</span><span class="o">.</span><span class="mi">12</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="na">el6</span><span class="o">.</span><span class="na">i686</span><span class="o">.</span><span class="na">rpm</span>
</span><span class='line'><span class="n">MySQL</span><span class="o">-</span><span class="n">embedded</span><span class="o">-</span><span class="n">advanced</span><span class="o">-</span><span class="mf">5.6</span><span class="o">.</span><span class="mi">12</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="na">el6</span><span class="o">.</span><span class="na">i686</span><span class="o">.</span><span class="na">rpm</span>
</span><span class='line'><span class="n">MySQL</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">advanced</span><span class="o">-</span><span class="mf">5.6</span><span class="o">.</span><span class="mi">12</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="na">el6</span><span class="o">.</span><span class="na">i686</span><span class="o">.</span><span class="na">rpm</span>
</span><span class='line'><span class="n">MySQL</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">advanced</span><span class="o">-</span><span class="mf">5.6</span><span class="o">.</span><span class="mi">12</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="na">el6</span><span class="o">.</span><span class="na">i686</span><span class="o">.</span><span class="na">rpm</span>
</span><span class='line'><span class="n">MySQL</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">compat</span><span class="o">-</span><span class="n">advanced</span><span class="o">-</span><span class="mf">5.6</span><span class="o">.</span><span class="mi">12</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="na">el6</span><span class="o">.</span><span class="na">i686</span><span class="o">.</span><span class="na">rpm</span>
</span><span class='line'><span class="n">MySQL</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">advanced</span><span class="o">-</span><span class="mf">5.6</span><span class="o">.</span><span class="mi">12</span><span class="o">-</span><span class="mi">1</span><span class="o">.</span><span class="na">el6</span><span class="o">.</span><span class="na">i686</span><span class="o">.</span><span class="na">rpm</span>
</span></code></pre></td></tr></table></div></figure>


<p>开始安装</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">rpm</span> <span class="o">-</span><span class="n">ivh</span> <span class="n">MySQL</span><span class="o">-*</span>
</span></code></pre></td></tr></table></div></figure>


<p>Mysql5.6的安全机制加强了，默认安装时会随机给ROOT用户生成一个密码保存在安装用户目录下/root/.mysql_secret中。由于没认真看英文文档，我直接安装完就把这个文件里的随机密码给改掉了，就无法得知ROOT初始密码，也无法登录进数据库了，囧。</p>

<p><strong>重置Mysql初始密码</strong></p>

<p>用ROOT用户登录，STOP数据库</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="na">d</span><span class="o">/</span><span class="n">mysql</span> <span class="n">stop</span>
</span></code></pre></td></tr></table></div></figure>


<p>跳过授权表启动Mysql服务器</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">mysqld_safe</span> <span class="o">--</span><span class="n">skip</span><span class="o">-</span><span class="n">grant</span><span class="o">-</span><span class="n">tables</span><span class="o">&amp;</span>
</span></code></pre></td></tr></table></div></figure>


<p>输入CTRL+C中断进程后应该可以看到mysqld已经在运行了</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">mysql</span> <span class="o">--</span><span class="n">user</span><span class="o">=</span><span class="n">root</span> <span class="n">mysql</span>
</span><span class='line'>
</span><span class='line'><span class="n">update</span> <span class="n">user</span> <span class="n">set</span> <span class="n">Password</span><span class="o">=</span><span class="n">PASSWORD</span><span class="o">(</span><span class="err">&#39;</span><span class="k">new</span><span class="o">-</span><span class="n">password</span><span class="err">&#39;</span><span class="o">);</span>
</span><span class='line'><span class="n">flush</span> <span class="n">privileges</span><span class="o">;</span>
</span><span class='line'><span class="n">exit</span><span class="o">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>操作完以上变更密码的命令后，可以重启mysqld了。</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">killall</span> <span class="n">mysqld_safe</span><span class="o">&amp;</span>
</span></code></pre></td></tr></table></div></figure>


<p>按CTRL+C退出，接着正常启动mysql</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">init</span><span class="o">.</span><span class="na">d</span><span class="o">/</span><span class="n">mysql</span> <span class="n">start</span>
</span></code></pre></td></tr></table></div></figure>


<p>用刚刚修改的新密码登录mysql即可</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">mysql</span> <span class="o">-</span><span class="n">uroot</span> <span class="o">-</span><span class="n">p</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-06-24/oafdan-xuan-shan-chu-xing-gong-neng/">OAF单选删除行功能</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-24T11:15:00+08:00" pubdate data-updated="true">Jun 24<span>th</span>, 2013</time>
        
         | <a href="/blog/2013-06-24/oafdan-xuan-shan-chu-xing-gong-neng/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p>平台：Jdeveloper 9i</p>

<hr />

<p><strong>一般实现步骤：</strong></p>

<ol>
<li>在VO中添加新transient属性selector，updatable设置为always。</li>
<li>在PG中给table添加singleSelection方法，并绑定view Instance为VO的instance，View Attribute为刚刚新建的transient属性seletor。</li>
<li>这样当用户勾选checkbox时，会给transient属性变量赋值为Y，因此，在删除逻辑中循环判断VO中的transient属性，当其为Y时执行remove该行即可实现选择删除功能。  <br/>
<strong>相关代码如下：</strong></li>
</ol>


<p><strong>CO中processFormRequest里添加代码如下：</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'> <span class="c1">//当单击deleteBtn按钮时执行AM中的deleteAutoSequenceVO方法    </span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">pageContext</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">&quot;deleteBtn&quot;</span><span class="o">)!=</span><span class="kc">null</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>      <span class="n">am</span><span class="o">.</span><span class="na">invokeMethod</span><span class="o">(</span><span class="s">&quot;deleteAutoSequenceVO&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>AM中代码如下：</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteAutoSequenceVO</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">OAViewObject</span> <span class="n">vo</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getChAutoSequenceVO1</span><span class="o">();</span>
</span><span class='line'>        <span class="n">RowSetIterator</span> <span class="n">iter</span> <span class="o">=</span> <span class="n">vo</span><span class="o">.</span><span class="na">createRowSetIterator</span><span class="o">(</span><span class="s">&quot;delete&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">vo</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">vo</span><span class="o">.</span><span class="na">getRowCount</span><span class="o">();</span>
</span><span class='line'>            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">Row</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">iter</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
</span><span class='line'>                <span class="k">if</span> <span class="o">(</span><span class="s">&quot;Y&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">temp</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&quot;selector&quot;</span><span class="o">)))</span> <span class="o">{</span>
</span><span class='line'>                    <span class="n">vo</span><span class="o">.</span><span class="na">setCurrentRow</span><span class="o">(</span><span class="n">temp</span><span class="o">);</span>
</span><span class='line'>                    <span class="n">vo</span><span class="o">.</span><span class="na">removeCurrentRow</span><span class="o">();</span>
</span><span class='line'>                    <span class="k">break</span><span class="o">;</span>
</span><span class='line'>                <span class="o">}</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="n">iter</span><span class="o">.</span><span class="na">closeRowSetIterator</span><span class="o">();</span>
</span><span class='line'>        <span class="k">throw</span> <span class="k">new</span> <span class="nf">OAException</span><span class="o">(</span><span class="s">&quot;删除成功,请点击[保存]按钮生效到数据库.&quot;</span><span class="o">,</span>
</span><span class='line'>                              <span class="n">OAException</span><span class="o">.</span><span class="na">INFORMATION</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>但是在实际开发中，出现一个很诡异的现象，其它页面单选删除功能都正常，某一页面单选之后却无法赋值Y给VO中的transient变量，推测可能是VO用的是复合主键或者其它框架BUG导致，无奈给单选再添加手工赋值功能。</p>

<p>选择单选控件，将其Client Action中的Action Type设置为firePartialAction Submit设置为false。准备在用户单选时调用自定义方法，给变量赋值。</p>

<p><strong>CO中processFormRequest里添加如下方法</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="s">&quot;update&quot;</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">pageContext</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">OAWebBeanConstants</span><span class="o">.</span><span class="na">EVENT_PARAM</span><span class="o">)))</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">String</span> <span class="n">rowRef</span> <span class="o">=</span>
</span><span class='line'>                <span class="n">pageContext</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="n">OAWebBeanConstants</span><span class="o">.</span><span class="na">EVENT_SOURCE_ROW_REFERENCE</span><span class="o">);</span>
</span><span class='line'>            <span class="n">Row</span> <span class="n">currentRow</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="na">findRowByRef</span><span class="o">(</span><span class="n">rowRef</span><span class="o">);</span>
</span><span class='line'>            <span class="n">currentRow</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">&quot;selector&quot;</span><span class="o">,</span> <span class="s">&quot;Y&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>这样便实现了单选删除功能。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-06-19/attribute-set-for-xxxattribute-in-view-object-xxxvo-failedwen-ti-jie-jue/">Attribute Set for xxxAttribute in View Object xxxVO Failed问题解决</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-19T15:50:00+08:00" pubdate data-updated="true">Jun 19<span>th</span>, 2013</time>
        
         | <a href="/blog/2013-06-19/attribute-set-for-xxxattribute-in-view-object-xxxvo-failedwen-ti-jie-jue/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<h2>平台：Jdeveloper 9i </h2>

<p>异常描述：</p>

<p>在表增加单选checkbox时，在VO中创建transient属性selector,最终在页面中无法勾选checkbox，发现值没法保存到VO中，页面抛出该异常：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'> 
</span><span class='line'><span class="kc">null</span> <span class="o">-</span> <span class="n">Attribute</span> <span class="n">set</span> <span class="k">for</span> <span class="n">Selector</span> <span class="n">in</span> <span class="n">view</span> <span class="n">object</span> <span class="n">employeeVO1</span> <span class="n">failed</span>
</span></code></pre></td></tr></table></div></figure>


<p>解决方案：</p>

<ol>
<li>检查VO中的transient属性selector是否设置为updatable</li>
<li>如果是在开发模式下，清空所有classes文件，重新编译；如果是在正式环境，删除该路径下的VO对象，可使用以下命令。</li>
</ol>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">exec</span> <span class="n">jdr_utils</span><span class="o">.</span><span class="na">deletedocument</span><span class="o">(</span><span class="err">&#39;</span><span class="o">/</span><span class="n">oracle</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">dengdezhao</span><span class="o">/</span><span class="n">test</span><span class="o">/</span><span class="n">server</span><span class="o">/</span><span class="n">employeeVO</span><span class="err">&#39;</span><span class="o">);</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-06-08/cong-backingbeanzhong-diao-yong-bu-dai-fragmentsde-taskflow/">从BackingBean中调用不带fragments的taskflow</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-08T16:11:00+08:00" pubdate data-updated="true">Jun 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013-06-08/cong-backingbeanzhong-diao-yong-bu-dai-fragmentsde-taskflow/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>有时候需要在backingBean中调用某一taskflow, 可以使用以下代码调用。不过只适用于可单独运行的taskflow，含有page fragments的taskflow不在此范围。</p>

<p>代码如下：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">callTaskFlow</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">FacesContext</span> <span class="n">fctx</span> <span class="o">=</span> <span class="n">FacesContext</span><span class="o">.</span><span class="na">getCurrentInstance</span><span class="o">();</span>
</span><span class='line'>        <span class="n">ControllerContext</span> <span class="n">cc</span> <span class="o">=</span> <span class="n">ControllerContext</span><span class="o">.</span><span class="na">getInstance</span><span class="o">();</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">taskflowId</span> <span class="o">=</span> <span class="s">&quot;btf_task&quot;</span><span class="o">;</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">taskflowDocument</span> <span class="o">=</span> <span class="s">&quot;/WEB-INF/btf_task.xml&quot;</span><span class="o">;</span>
</span><span class='line'>        <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
</span><span class='line'>        <span class="n">TaskFlowId</span> <span class="n">tid</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TaskFlowId</span><span class="o">(</span><span class="n">taskflowDocument</span><span class="o">,</span> <span class="n">taskflowId</span><span class="o">);</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">taskflowURL</span> <span class="o">=</span> <span class="n">cc</span><span class="o">.</span><span class="na">getTaskFlowURL</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">tid</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
</span><span class='line'>        <span class="n">ExtendedRenderKitService</span> <span class="n">erks</span> <span class="o">=</span>
</span><span class='line'>            <span class="n">Service</span><span class="o">.</span><span class="na">getRenderKitService</span><span class="o">(</span><span class="n">fctx</span><span class="o">,</span> <span class="n">ExtendedRenderKitService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>        <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
</span><span class='line'>        <span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;window.open(\&quot;&quot;</span> <span class="o">+</span> <span class="n">taskflowURL</span> <span class="o">+</span>
</span><span class='line'>                  <span class="s">&quot;\&quot;&quot;</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;,\&quot;_self\&quot;);&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">erks</span><span class="o">.</span><span class="na">addScript</span><span class="o">(</span><span class="n">FacesContext</span><span class="o">.</span><span class="na">getCurrentInstance</span><span class="o">(),</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</span><span class='line'>        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-06-06/fen-ye-lan-chu-xian-3ge-wen-hao-bugjie-jue/"><af:table>分页栏出现3个问号BUG解决</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-06T01:58:00+08:00" pubdate data-updated="true">Jun 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013-06-06/fen-ye-lan-chu-xian-3ge-wen-hao-bugjie-jue/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p>平台：Jdeveloper 11.1.1.7.0</p>

<hr />

<p><strong>BUG描述</strong></p>

<p><img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130606010242.jpg" alt="../../../wp-content/uploads/QQ截图20130606010242.jpg" /></p>

<p>如上图所示，“页”字前后出现三个问号。</p>

<p><strong>原因分析</strong></p>

<p>查看LOG文件</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="o">&lt;</span><span class="n">RenderingContext</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">getTranslatedString</span><span class="o">&gt;</span> <span class="err">无法从外观</span> <span class="n">mySkin</span><span class="o">.</span><span class="na">desktop</span> <span class="err">获取资源关键字</span> <span class="err">页</span>
</span></code></pre></td></tr></table></div></figure>


<p>可见是RenderingContext类中getTranslatedString方法发生异常。  <br/>
查看源代码分析：</p>

<p><strong>找到源代码所在位置</strong>：</p>

<p><img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130606012628.jpg" alt="../../../wp-content/uploads/QQ截图20130606012628.jpg" /></p>

<p><strong>将JAR包解压得到RenderingContext类，反编译查看</strong></p>

<p><img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130606012734.jpg" alt="../../../wp-content/uploads/QQ截图20130606012734.jpg" /></p>

<p>结果如下<strong>RenderingContext.class</strong>：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTranslatedString</span><span class="o">(</span><span class="n">String</span> <span class="n">key</span><span class="o">)</span>
</span><span class='line'>  <span class="o">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="o">(</span><span class="n">key</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="k">try</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nf">getSkin</span><span class="o">().</span><span class="na">getTranslatedString</span><span class="o">(</span><span class="n">getLocaleContext</span><span class="o">(),</span> <span class="n">key</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>    <span class="k">catch</span> <span class="o">(</span><span class="n">MissingResourceException</span> <span class="n">mre</span><span class="o">)</span>
</span><span class='line'>    <span class="o">{</span>
</span><span class='line'>      <span class="n">_LOG</span><span class="o">.</span><span class="na">severe</span><span class="o">(</span><span class="s">&quot;CANNOT_GET_RESOURCE_KEY&quot;</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="n">key</span><span class="o">,</span> <span class="n">getSkin</span><span class="o">().</span><span class="na">getId</span><span class="o">()</span> <span class="o">});</span> <span class="o">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="s">&quot;???&quot;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s">&quot;???&quot;</span><span class="o">;</span>
</span><span class='line'>  <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>可知在调用getTranslatedString获取Resource时，发生MissingResourceException异常所以返回了带&#8221;???&#8221;+Key+&#8221;???&#8221;字样的字符串。</p>

<p><strong>解决方案：</strong></p>

<p>根据以上分析基本可知出现问号的原因是在获取resourcebundle时，找不到Key为页的resource，所以直接返回了&#8221;???&#8221; + key + &#8220;???&#8221;，就出现分页显示出现问号的BUG。</p>

<p><strong>方案一：</strong>重写ResourceBundle类，增加KEY值为“页”的资源。
步骤如下：</p>

<ul>
<li>创建SkinBundle类 extends ListResourceBundle</li>
</ul>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">cn</span><span class="o">.</span><span class="na">dengdezhao</span><span class="o">.</span><span class="na">bundle</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SkinBundle</span> <span class="kd">extends</span> <span class="n">ListResourceBundle</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Override</span>
</span><span class='line'>    <span class="kd">public</span> <span class="n">Object</span><span class="o">[][]</span> <span class="nf">getContents</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;executing...&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="k">return</span>  <span class="k">new</span> <span class="n">Object</span><span class="o">[][]{</span> <span class="o">{</span> <span class="s">&quot;页&quot;</span><span class="o">,</span> <span class="s">&quot;页&quot;</span> <span class="o">}</span> <span class="o">};</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>创建trinidad-skins.xml文件注册定制化Skin</li>
</ul>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;skins</span> <span class="na">xmlns=</span><span class="s">&quot;http://myfaces.apache.org/trinidad/skin&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;skin&gt;</span>
</span><span class='line'>        <span class="nt">&lt;id&gt;</span>mySkin.desktop<span class="nt">&lt;/id&gt;</span>
</span><span class='line'>        <span class="nt">&lt;family&gt;</span>mySkin<span class="nt">&lt;/family&gt;</span>
</span><span class='line'>        <span class="nt">&lt;extends&gt;</span>skyros-v1.desktop<span class="nt">&lt;/extends&gt;</span>
</span><span class='line'>        <span class="nt">&lt;render-kit-id&gt;</span>org.apache.myfaces.trinidad.desktop<span class="nt">&lt;/render-kit-id&gt;</span>
</span><span class='line'>        <span class="nt">&lt;style-sheet-name&gt;</span>css/mySkin.css<span class="nt">&lt;/style-sheet-name&gt;</span>
</span><span class='line'>        <span class="nt">&lt;bundle-name&gt;</span>cn.dengdezhao.bundle.SkinBundle<span class="nt">&lt;/bundle-name&gt;</span>
</span><span class='line'>        <span class="c">&lt;!--&lt;bundle-name&gt;ApplicationBundle&lt;/bundle-name&gt;--&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/skin&gt;</span>
</span><span class='line'><span class="nt">&lt;/skins&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>修改trinidad-config.xml文件如下：</li>
</ul>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;trinidad-config</span> <span class="na">xmlns=</span><span class="s">&quot;http://myfaces.apache.org/trinidad/config&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;skin-family&gt;</span>mySkin<span class="nt">&lt;/skin-family&gt;</span>
</span><span class='line'><span class="nt">&lt;/trinidad-config&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>创建css/mySkin.css文件（内容默认CSS即可）</li>
</ul>


<p>运行即发现问号消失。</p>

<p><strong>方案二：</strong>其实原理跟方案一一样，也是通过改resourcebundle实现。resourcebundle支持三种类型，一种是以上的扩展ListResourceBundle类实现，一种是通过配置文件properties实现，另外一种是xliff实现。也可创建一个ApplicationBundle.properties文件，内容如下:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="err">页</span> <span class="o">=</span> <span class="err">页</span>
</span></code></pre></td></tr></table></div></figure>


<p>trinidad-skins.xml里的bundle-name节点设置成ApplicationBundle也可实现同样效果。</p>

<p>定制CSS可参照<a href="http://www.dengdezhao.cn/blog/2011-06-27/%E5%AE%9A%E5%88%B6adf%E5%BA%94%E7%94%A8%E7%9A%84css/">&#8220;定制CSS&#8221;</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-06-02/groovyzai-adfzhong-de-ying-yong/">Groovy在ADF中的应用</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-02T11:14:00+08:00" pubdate data-updated="true">Jun 2<span>nd</span>, 2013</time>
        
         | <a href="/blog/2013-06-02/groovyzai-adfzhong-de-ying-yong/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>使用Groovy脚本，在开发ADF应用中可以极大地提高开发效率，实现某些看似很复杂的功能。</p>

<p>比如在empVO中获取sequence值:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">db</span> <span class="o">=</span> <span class="n">adf</span><span class="o">.</span><span class="na">object</span><span class="o">.</span><span class="na">getDBTransaction</span><span class="o">()</span>
</span><span class='line'><span class="n">sq</span> <span class="o">=</span> <span class="k">new</span> <span class="n">oracle</span><span class="o">.</span><span class="na">jbo</span><span class="o">.</span><span class="na">server</span><span class="o">.</span><span class="na">SequenceImpl</span><span class="o">(</span><span class="s">&quot;EMPLOYEES_SEQ&quot;</span><span class="o">,</span><span class="n">db</span><span class="o">)</span>
</span><span class='line'><span class="n">sq</span><span class="o">.</span><span class="na">getSequenceNumber</span><span class="o">()</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>在empVO中获取Salary字段最大值max：</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">adf</span><span class="o">.</span><span class="na">object</span><span class="o">.</span><span class="na">getRowSet</span><span class="o">().</span><span class="na">max</span><span class="o">(</span><span class="s">&quot;Salary&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>在empVO中获取Salary字段最小值min：</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">adf</span><span class="o">.</span><span class="na">object</span><span class="o">.</span><span class="na">getRowSet</span><span class="o">().</span><span class="na">min</span><span class="o">(</span><span class="s">&quot;Salary&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>在empVO中获取Salary字段合计sum：</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">adf</span><span class="o">.</span><span class="na">object</span><span class="o">.</span><span class="na">getRowSet</span><span class="o">().</span><span class="na">sum</span><span class="o">(</span><span class="s">&quot;Salary&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>在empVO中获取Salary字段均值avg：</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">adf</span><span class="o">.</span><span class="na">object</span><span class="o">.</span><span class="na">getRowSet</span><span class="o">().</span><span class="na">avg</span><span class="o">(</span><span class="s">&quot;Salary&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>在empVO中获取Salary字段数量count：</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">adf</span><span class="o">.</span><span class="na">object</span><span class="o">.</span><span class="na">getRowSet</span><span class="o">().</span><span class="na">count</span><span class="o">(</span><span class="s">&quot;Salary&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>import JAVA类库</strong>  <br/>
导入SimpleDateFormat类，对当前日期格式化成String对象输出</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span>
</span><span class='line'><span class="n">df</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;yyyy-MM-dd&quot;</span><span class="o">)</span>
</span><span class='line'><span class="n">df</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">adf</span><span class="o">.</span><span class="na">currentDate</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>获取当前行中Attribute值</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">source</span><span class="o">.</span><span class="na">Salary</span>
</span><span class='line'><span class="n">source</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">&quot;Salary&quot;</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>调用EntityImpl中的方法</strong> <br/>
在EntityImpl中定义的方法均可以通过<strong>adf.object</strong>.yourMethod()方式调用  <br/>
其它如：  <br/>
<strong>adf.object.entityState</strong>  <br/>
<strong>adf.object.postState</strong>  <br/>
<strong>adf.userSession</strong> //获得Session <br/>
<strong>adf.context</strong> //获得AdfContext对象</p>

<p><strong>调用AM中的自定义方法getHelloWorld()</strong></p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">structureDef</span><span class="o">.</span><span class="na">getApplicationModule</span><span class="o">().</span><span class="na">getHelloWorld</span><span class="o">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Groovy脚本的用处还有很多，以上只是总结了部分常用的调用方法。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-06-01/li-yong-contextual-eventshua-xin-region/">利用contextual event刷新Region</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-01T21:20:00+08:00" pubdate data-updated="true">Jun 1<span>st</span>, 2013</time>
        
         | <a href="/blog/2013-06-01/li-yong-contextual-eventshua-xin-region/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<p>平台： Jdev 11.1.1.7.0</p>

<h2>需求：两个region，其中一个region对数据进行修改后，需要刷新另外一个region显示   </h2>

<hr />

<h4>创建bound taskflow: btf_form</h4>

<p><img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130601204146.jpg" alt="../../../wp-content/uploads/QQ截图20130601204146.jpg" /></p>

<p>taskflow只包括一个页面碎片empForm.jsff，拖入employeeVO生成af:Form。  <br/>
<img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130601210114.jpg" alt="../../../wp-content/uploads/QQ截图20130601210114.jpg" /></p>

<h3>创建bound taskflow: btf_table</h3>

<p>同上，只有一个页面碎片empTable.jsff，拖入employeeVO生成af:table。   <br/>
<img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130601210258.jpg" alt="../../../wp-content/uploads/QQ截图20130601210258.jpg" /></p>

<p>以上两个taskflow皆使用No Controller Transaction.</p>

<h4>添加contextual event</h4>

<p>需要在empTable.jsff页面中修改数据，单击commit按钮时，让empForm.jsff页面中的数据即时更新。因此，给commitbutton添加contextual event: saveEvent。  <br/>
<img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130601210725.jpg" alt="../../../wp-content/uploads/QQ截图20130601210725.jpg" /></p>

<h4>创建mainPG页面引入以上taskflow生成region</h4>

<p>创建一个两栏jspx页面mainPG.jspx， 分别拖入以上两taskflow生成region。  <br/>
给contextual event 绑定consumer。</p>

<p>切换到mainPG.jspx页面的pagedef页面，从structure窗口中执行以下操作；  <br/>
<img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130601211338.jpg" alt="../../../wp-content/uploads/QQ截图20130601211338.jpg" /></p>

<p><img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130601211438.jpg" alt="../../../wp-content/uploads/QQ截图20130601211438.jpg" /></p>

<p>producer即为contextual event的事件源，由btf_table中的commitbutton产生，consumer即为btf_form中的execute消耗，即btf_table中每commit一次，btf_form即执行一次execute操作刷新页面。</p>

<p>以上只是简单了解下contextual event的工作原理，contextual event还可以带参在region之间传值等。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013-06-01/zai-manangedbeanzhong-diao-yong-appmoduleimplzhong-zi-ding-yi-fang-fa-de-liang-chong-fang-shi/">在ManagedBean中调用AppModuleImpl中自定义方法的两种方式</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-01T10:48:00+08:00" pubdate data-updated="true">Jun 1<span>st</span>, 2013</time>
        
         | <a href="/blog/2013-06-01/zai-manangedbeanzhong-diao-yong-appmoduleimplzhong-zi-ding-yi-fang-fa-de-liang-chong-fang-shi/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><hr />

<h2>平台: Jdev11.1.1.7.0</h2>

<hr />

<ol>
<li><strong><strong>AM</strong></strong>中创建自定义方法sayHello</li>
</ol>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">sayHello</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">){</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;hello world...&quot;</span><span class="o">+</span><span class="n">value</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li><p>暴露该方法以便在ManagedBean中调用  <br/>
<img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130601103416.jpg" alt="../../../wp-content/uploads/QQ截图20130601103416.jpg" /></p></li>
<li><p>从Data Controls中将该方法拖到页面生成Bindings或者手工添加该Bindings。  <br/>
<img src="../../../wp-content/uploads/QQ%E6%88%AA%E5%9B%BE20130601103826.jpg" alt="../../../wp-content/uploads/QQ截图20130601103826.jpg" /></p></li>
<li><p>为了测试方便，创建了一个inputText，并绑定该inputText的valueChangeListener为ManagedBean中的valueChange方法.</p></li>
</ol>


<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">valueChange</span><span class="o">(</span><span class="n">ValueChangeEvent</span> <span class="n">valueChangeEvent</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">newValue</span> <span class="o">=</span> <span class="n">valueChangeEvent</span><span class="o">.</span><span class="na">getNewValue</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
</span><span class='line'>        <span class="c1">//方法一：调用bindings</span>
</span><span class='line'>        <span class="n">BindingContainer</span> <span class="n">bindings</span> <span class="o">=</span> <span class="n">ADFUtils</span><span class="o">.</span><span class="na">getBindingContainer</span><span class="o">();</span>
</span><span class='line'>        <span class="n">OperationBinding</span> <span class="n">refreshChecklist</span> <span class="o">=</span> <span class="n">bindings</span><span class="o">.</span><span class="na">getOperationBinding</span><span class="o">(</span><span class="s">&quot;sayHello&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">refreshChecklist</span><span class="o">.</span><span class="na">getParamsMap</span><span class="o">().</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;value&quot;</span><span class="o">,</span> <span class="n">newValue</span><span class="o">);</span>
</span><span class='line'>        <span class="n">refreshChecklist</span><span class="o">.</span><span class="na">execute</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//方法二：直接调用AM，通过AM调用该方法</span>
</span><span class='line'>        <span class="n">AppModuleImpl</span> <span class="n">am</span> <span class="o">=</span> <span class="o">(</span><span class="n">AppModuleImpl</span><span class="o">)</span><span class="n">ADFUtils</span><span class="o">.</span>
</span><span class='line'>      <span class="n">getApplicationModuleForDataControl</span><span class="o">(</span><span class="s">&quot;AppModuleDataControl&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="n">am</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="n">newValue</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>以上两种方式均可以调用AM中的自定义方法。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>分类目录</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/adf/'>ADF (34)</a></li>
<li class='category'><a href='/blog/categories/ebs/'>EBS (2)</a></li>
<li class='category'><a href='/blog/categories/oaf/'>OAF (9)</a></li>
<li class='category'><a href='/blog/categories/oracle/'>Oracle (8)</a></li>
<li class='category'><a href='/blog/categories/soa/'>SOA (3)</a></li>
<li class='category'><a href='/blog/categories/sinaappengine/'>SinaAppEngine (1)</a></li>
<li class='category'><a href='/blog/categories/forms/'>forms (1)</a></li>
<li class='category'><a href='/blog/categories/java/'>java (2)</a></li>
<li class='category'><a href='/blog/categories/jdeveloper/'>jdeveloper (1)</a></li>
<li class='category'><a href='/blog/categories/linux/'>linux (2)</a></li>
<li class='category'><a href='/blog/categories/mysql/'>mysql (1)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (1)</a></li>
<li class='category'><a href='/blog/categories/others/'>others (1)</a></li>
<li class='category'><a href='/blog/categories/webcenter/'>webcenter (4)</a></li>
<li class='category'><a href='/blog/categories/weblogic/'>weblogic (1)</a></li>
<li class='category'><a href='/blog/categories/wordpress/'>wordpress (1)</a></li>

  </ul>
</section>
<section>
  <h1>最新发表</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014-11-28/shi-yong-ridczai-webcenter-portalji-cheng-ecmde-wen-dang-cha-xun-gong-neng/">使用RIDC在webcenter portal集成ECM的文档查询功能</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014-10-23/ding-zhi-webcenterde-people-connectionzu-jian/">定制webcenter的people connection组件</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014-09-17/dong-tai-gai-bian-lovde-zhi-ji/">动态改变LOV的值集</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014-08-26/webcenter-portaldiao-yong-document-service/">webcenter portal调用document service</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014-08-25/chuang-jian-content-repositoryshi-chu-xian-cuo-wu/">创建Content Repository时出现错误</a>
      </li>
    
  </ul>
</section>




<section>
  <h1>友情链接</h1>
  <ul>
  	<li><a href="http://www.liqifa.com">[小分号]</a></li>
 	<li><a href="http://www.fmw007.com">[梦想左岸]</a></li>
 	<li><a href="http://oraclefmw.blog.163.com/">[追梦]</a></li>
 	<li><a href="http://blog.csdn.net/ygj26">[小尹妹纸]</a></li>
 	<li><a href="http://oracleseeker.com/">[OracleSeeker，Oracle探索者]</a></li>
  </ul>
</section>

<section>
<h1>新浪微博</h1>
<ul id="weibo">
<li>
<iframe
width="100%"
height="550"
class="share_self"
frameborder="0"
scrolling="no"
src="http://widget.weibo.com/weiboshow/index.php?width=0&height=550&ptype=0&speed=0&skin=&isTitle=0&noborder=1&isWeibo=0&isFans=&uid=1774817797&verifier=75ee09e4&colors=17236,003643,004354,00b7ef,ffffff&dpc=1">
</iframe>
</li>
</ul>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - pierreorz -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F2c50098a945120bddaa5f082c4e56cea' type='text/javascript'%3E%3C/script%3E"));
</script>

</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'adfkf';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
